<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="description" content="Chuio Admin Portal">
  <link rel="icon" type="image/x-icon" href="/uploads/chuio/favicon%20(1).ico">
  <title>Admin Portal | Chuio</title>

  <!-- QR code library -->
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>

  <!-- Admin CSS (Core + Modules) -->
  <link rel="stylesheet" href="/admin.css" />
  <link rel="stylesheet" href="/admin-orders.css" />
  <link rel="stylesheet" href="/admin-tables.css" />
  <link rel="stylesheet" href="/admin-menu.css" />
  <link rel="stylesheet" href="/admin-staff.css" />
  <link rel="stylesheet" href="/admin-reports.css" />
  <link rel="stylesheet" href="/admin-settings.css" />
</head>

<body>



  <!-- ================= MAIN APP (hidden until login) ================= -->
  <div id="app-container" class="app-container" style="display: none;">
    <!-- HEADER with collapsible menu toggle, section title, and admin dropdown -->
    <header class="app-header">
        <div class="header-left">
          <button id="sidebar-toggle" class="sidebar-toggle" onclick="toggleSidebar()">â˜°</button>
        </div>
        
        <div class="header-center">
        </div>
        
        <div class="header-right">
          <button id="table-edit-btn" class="btn-primary" onclick="toggleTableEditMode()" style="display: none;"><img src="/uploads/website/pencil.png" alt="edit" class="btn-icon"> Edit</button>
          <button id="menu-edit-btn" class="btn-primary" onclick="toggleMenuEditMode()" style="display: none;"><img src="/uploads/website/pencil.png" alt="edit" class="btn-icon"> Edit</button>
          <button id="staff-edit-btn" class="btn-primary" onclick="toggleStaffEditMode('staff')" style="display: none;"><img src="/uploads/website/pencil.png" alt="edit" class="btn-icon"> Edit</button>
          <button id="reports-btn" class="btn-primary" style="display: none;">âˆ¿ Reports</button>
          <button id="edit-settings-header" class="btn-primary" onclick="enterEditMode()" style="display: none;"><img src="/uploads/website/pencil.png" alt="edit" class="btn-icon"> Edit</button>
          <button id="orders-history-header-btn" class="btn-tertiary" onclick="toggleOrdersHistoryMode()" style="display: none;"><img src="/uploads/website/history.png" alt="history" style="width: 16px; height: 16px; filter: brightness(0) invert(1);"/> History</button>
          <button id="admin-menu-btn" class="admin-menu-btn" onclick="toggleAdminDropdown()">
            <img src="/uploads/website/user.png" alt="admin" class="btn-icon"> Admin
            <span class="dropdown-arrow">â–¼</span>
          </button>
          <div id="admin-dropdown" class="admin-dropdown hidden">
            <div id="superadmin-restaurant-list" style="display: none; padding: 10px; border-bottom: 1px solid #ddd; max-height: 300px; overflow-y: auto;"></div>
            <button class="dropdown-item" onclick="handleLogout()">ðŸšª Logout</button>
          </div>
        </div>
      </header>

      <!-- SIDEBAR NAVIGATION (collapsible) -->
      <nav class="sidebar" id="sidebar">
        <div class="sidebar-menu">
          <button class="menu-btn" data-section="orders" onclick="switchSection('orders')">
            <img src="/uploads/website/order.png" alt="orders" class="icon">
            <span class="menu-text">Orders</span>
          </button>
          <button class="menu-btn active" data-section="tables" onclick="switchSection('tables')">
            <img src="/uploads/website/table.png" alt="tables" class="icon">
            <span class="menu-text">Tables</span>
          </button>
          <button class="menu-btn" data-section="menu" onclick="switchSection('menu')" id="menu-nav-btn">
            <img src="/uploads/website/menu.png" alt="menu" class="icon">
            <span class="menu-text">Menu</span>
          </button>
          <button class="menu-btn" data-section="staff" onclick="switchSection('staff')" id="staff-nav-btn">
            <img src="/uploads/website/teamwork.png" alt="staff" class="icon">
            <span class="menu-text">Staff</span>
          </button>
          <button class="menu-btn" data-section="reports" onclick="switchSection('reports')" id="reports-nav-btn">
            <img src="/uploads/website/report.png" alt="reports" class="icon">
            <span class="menu-text">Reports</span>
          </button>
          <button class="menu-btn" data-section="settings" onclick="switchSection('settings')" id="settings-nav-btn">
            <img src="/uploads/website/settings.png" alt="settings" class="icon">
            <span class="menu-text">More</span>
          </button>
        </div>
        
        <div class="sidebar-footer">
          <div class="sidebar-trademark">chuio.io</div>
        </div>
      </nav>

      <!-- MAIN CONTENT -->
      <main class="main-content">

        <!-- ================= ORDERS SECTION ================= -->
        <section id="section-orders" class="content-section admin-only">
          <!-- Orders container will be loaded here -->
          <div id="orders-section-content">
            <!-- JS renders orders content here -->
          </div>
        </section>

        <!-- ================= TABLES SECTION (DEFAULT) ================= -->
        <section id="section-tables" class="content-section active">
          <!-- Tables content loaded dynamically from admin-tables.html -->
        </section>

        <!-- ================= MENU MANAGEMENT SECTION ================= -->
        <section id="section-menu" class="content-section admin-only">
          <!-- Menu content loaded dynamically from admin-menu.html -->
        </section>

        <!-- ================= COUPONS MANAGEMENT SECTION ================= -->
        <section id="section-coupons" class="content-section admin-only">
          <!-- Coupons content loaded dynamically from admin-coupons.html -->
        </section>

        <!-- ================= STAFF MANAGEMENT SECTION ================= -->
        <section id="section-staff" class="content-section admin-only">
          <!-- Staff content loaded dynamically from admin-staff.html -->
        </section>

        <!-- ================= STAFF FORM SLIDING PANEL ================= -->
        <div id="staff-form-overlay" class="staff-form-overlay hidden" onclick="closeStaffForm()"></div>
        <div id="staff-form-panel" class="staff-form-panel hidden">
          <div class="staff-form-header">
            <h3 id="staff-form-title">Create New Staff</h3>
            <button onclick="closeStaffForm()" class="staff-form-close">âœ•</button>
          </div>
          <div id="staff-form-content" class="staff-form-content">
            <div id="staff-error" class="error-message" style="display: none;"></div>
            <div id="staff-success" class="success-message" style="display: none;"></div>
            
            <form onsubmit="event.preventDefault(); createOrUpdateStaff();">
              <div class="form-group">
                <label data-i18n="admin.staff-name">Staff Name</label>
                <input id="staff-name" placeholder="e.g., John Smith" required />
              </div>

              <div class="form-group">
                <label data-i18n="admin.pin-6digits">PIN (6 digits)</label>
                <input id="staff-pin" type="text" placeholder="e.g., 123456" maxlength="6" required />
              </div>

              <div class="form-group">
                <label>Role</label>
                <select id="staff-role" onchange="handleStaffRoleChange()" required>
                  <option value="">-- Select Role --</option>
                  <option value="staff">Staff</option>
                  <option value="kitchen">Kitchen</option>
                </select>
              </div>

              <!-- Access Rights Section (shows based on role) -->
              <div id="staff-access-rights-section">
                <!-- Tab Access for Staff Role -->
                <div id="staff-tab-access" style="display: none;">
                  <h4 style="margin-top: 0; margin-bottom: 10px;">Tab Access Permissions</h4>
                  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                      <input type="checkbox" id="access-orders" class="staff-access-checkbox" value="orders" /> Orders
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                      <input type="checkbox" id="access-tables" class="staff-access-checkbox" value="tables" /> Tables
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                      <input type="checkbox" id="access-menu" class="staff-access-checkbox" value="menu" /> Menu
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                      <input type="checkbox" id="access-staff" class="staff-access-checkbox" value="staff" /> Staff
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                      <input type="checkbox" id="access-reports" class="staff-access-checkbox" value="reports" /> Reports
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                      <input type="checkbox" id="access-settings" class="staff-access-checkbox" value="settings" /> Settings
                    </label>
                  </div>
                </div>

                <!-- Category Access for Kitchen Role -->
                <div id="kitchen-category-access" style="display: none;">
                  <h4 style="margin-top: 0; margin-bottom: 10px;">Food Categories Access</h4>
                  <div id="kitchen-categories-list" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <!-- JS populates this with menu categories -->
                  </div>
                </div>
              </div>

              <div class="form-actions" style="margin-top: 20px;">
                <button type="submit" class="btn-primary" id="staff-submit-btn" style="width: 100%;">âž• Add Staff</button>
                <button type="button" class="btn-tertiary" onclick="closeStaffForm()" style="width: 100%; margin-top: 8px;">Cancel</button>
              </div>
            </form>
          </div>
        </div>

        <!-- ================= REPORTS SECTION ================= -->
        <section id="section-reports" class="content-section admin-only">
          <!-- Reports dynamically loaded from admin-reports.html -->
        </section>

        <!-- ================= SETTINGS SECTION ================= -->
        <section id="section-settings" class="content-section admin-only">
          <!-- Settings content loaded dynamically from admin-settings.html -->
        </section>

      </main>
    </div>



  <!-- ================= SCRIPTS ================= -->
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
  <script src="/translations.js"></script>
  <script src="/admin.js"></script>
  <!-- Modular admin functions -->
  <script src="/admin-orders.js"></script>
  <script src="/admin-tables.js"></script>
  <script src="/admin-menu.js"></script>
  <script src="/admin-staff.js"></script>
  <script src="/admin-reports.js"></script>
  <script src="/admin-settings.js"></script>
</body>
</html>
